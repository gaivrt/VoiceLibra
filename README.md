# VoiceLibra - ç”µå­ä¹¦è½¬æœ‰å£°ä¹¦é¡¹ç›®
[![Python Version](https://img.shields.io/badge/python-3.10%2B-blue)](https://www.python.org/)
[![Fish-Speech](https://img.shields.io/badge/TTS-Fish--Speech-orange)](https://github.com/fishaudio/fish-speech)
[![Gradio](https://img.shields.io/badge/UI-Gradio-brightgreen)](https://gradio.app/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

## ğŸ“– é¡¹ç›®ç®€ä»‹

VoiceLibra æ˜¯ä¸€ä¸ªå°†ç”µå­ä¹¦è‡ªåŠ¨è½¬æ¢ä¸ºæœ‰å£°ä¹¦çš„æ™ºèƒ½å·¥å…·ã€‚å®ƒä½¿ç”¨ **Fish-Speech** TTSå¼•æ“æä¾›é«˜è´¨é‡çš„è¯­éŸ³åˆæˆï¼Œæ”¯æŒæ™ºèƒ½ç« èŠ‚æ‹†åˆ†ï¼Œå¹¶ç”ŸæˆåŒ…å«å®Œæ•´ç« èŠ‚å…ƒæ•°æ®çš„æœ‰å£°ä¹¦æ–‡ä»¶ã€‚é¡¹ç›®æä¾›äº†åŸºäº **Gradio** çš„ç›´è§‚Webç•Œé¢ï¼Œè®©è½¬æ¢è¿‡ç¨‹å˜å¾—ç®€å•æ˜“ç”¨ã€‚

### âœ¨ ä¸»è¦ç‰¹æ€§

- ğŸ”„ **å¤šæ ¼å¼æ”¯æŒ**ï¼šæ”¯æŒ20+ç§ç”µå­ä¹¦æ ¼å¼è¾“å…¥ (epub/pdf/mobiç­‰)
- ğŸ¯ **æ™ºèƒ½è§£æ**ï¼šè‡ªåŠ¨è¯†åˆ«ç« èŠ‚ç»“æ„ï¼Œæ™ºèƒ½åˆ†å‰²å†…å®¹
- ğŸ—£ï¸ **é«˜è´¨é‡TTS**ï¼šé›†æˆFish-Speechå¼•æ“ï¼Œæ”¯æŒå¤šè¯­è¨€
- ğŸ¤ **å£°éŸ³å…‹éš†**ï¼šæ”¯æŒä¸Šä¼ å‚è€ƒéŸ³é¢‘å®ç°å£°éŸ³å…‹éš†
- ğŸ“‘ **å…ƒæ•°æ®æ”¯æŒ**ï¼šåœ¨æœ‰å£°ä¹¦ä¸­ä¿ç•™å®Œæ•´ç« èŠ‚ä¿¡æ¯
- ğŸµ **å¤šæ ¼å¼è¾“å‡º**ï¼šæ”¯æŒm4b/mp3/wavç­‰å¤šç§éŸ³é¢‘æ ¼å¼
- ğŸŒ **Webç•Œé¢**ï¼šæä¾›å‹å¥½çš„Gradioæ“ä½œç•Œé¢

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python >= 3.10
- NVIDIA GPUï¼ˆæ¨èï¼Œä½†CPUä¹Ÿå¯è¿è¡Œï¼‰
- [Calibre](https://calibre-ebook.com/)
- [FFmpeg](https://ffmpeg.org/)
- [Fish-Speech](https://github.com/fishaudio/fish-speech) APIæœåŠ¡

### å®‰è£…æ­¥éª¤

1. å…‹éš†é¡¹ç›®ï¼š
```bash
git clone https://github.com/yourusername/VoiceLibra.git
cd VoiceLibra
```

2. å®‰è£…ä¾èµ–ï¼š
```bash
pip install -r requirements.txt
```

3. å¯åŠ¨Fish-SpeechæœåŠ¡ï¼š
```bash
python -m tools.api_server --listen 0.0.0.0:8080 --llama-checkpoint-path <model_path> --decoder-checkpoint-path <decoder_path> --decoder-config-name firefly_gan_vq
```

4. å¯åŠ¨åº”ç”¨ï¼š
```bash
python main.py
```

è®¿é—® http://127.0.0.1:7860 å³å¯çœ‹åˆ°ç•Œé¢

## ğŸ’¡ ä½¿ç”¨æŒ‡å—

### åŸºæœ¬æµç¨‹

1. **å‡†å¤‡æ–‡ä»¶**
   - ä¸Šä¼ ç”µå­ä¹¦æ–‡ä»¶ï¼ˆæ”¯æŒepub/pdf/mobiç­‰ï¼‰
   - (å¯é€‰) ä¸Šä¼ å‚è€ƒéŸ³é¢‘è¿›è¡Œå£°éŸ³å…‹éš†

2. **é¢„è§ˆé…ç½®**
   - ç‚¹å‡»"é¢„è§ˆç« èŠ‚"æ£€æŸ¥ç« èŠ‚åˆ’åˆ†
   - é€‰æ‹©è¾“å‡ºéŸ³é¢‘æ ¼å¼(m4b/mp3ç­‰)
   - è°ƒæ•´å…¶ä»–å‚æ•°ï¼ˆå¦‚æœ‰ï¼‰

3. **å¼€å§‹è½¬æ¢**
   - ç‚¹å‡»"è½¬æ¢ä¸ºæœ‰å£°ä¹¦"
   - ç­‰å¾…è½¬æ¢å®Œæˆï¼ŒæœŸé—´å¯é¢„è§ˆå„ç« èŠ‚
   - ä¸‹è½½æœ€ç»ˆçš„æœ‰å£°ä¹¦æ–‡ä»¶

### é«˜çº§åŠŸèƒ½

- **å£°éŸ³å…‹éš†**ï¼šä¸Šä¼ 10-30ç§’çš„æ¸…æ™°å½•éŸ³ï¼Œæ­é…å¯¹åº”æ–‡æœ¬æ•ˆæœæ›´ä½³
- **ç« èŠ‚å®šåˆ¶**ï¼šæ”¯æŒæ‰‹åŠ¨è°ƒæ•´ç« èŠ‚åˆ’åˆ†
- **å…ƒæ•°æ®å®šåˆ¶**ï¼šå¯è‡ªå®šä¹‰ç« èŠ‚æ ‡é¢˜å’Œæ—¶é—´ç‚¹

## ğŸ”§ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæ¨¡å—

- **è§£æå¼•æ“** (parser.py)
  - åŸºäºebooklibçš„EPUBè§£æ
  - æ™ºèƒ½ç« èŠ‚è¯†åˆ«ç®—æ³•
  - æ–‡æœ¬é¢„å¤„ç†ä¼˜åŒ–

- **è¯­éŸ³å¼•æ“** (tts_fish.py)
  - Fish-Speech APIé›†æˆ
  - å£°éŸ³å…‹éš†å¤„ç†
  - å¤šè¯­è¨€æ”¯æŒ

- **ç•Œé¢æ¨¡å—** (ui.py)
  - Gradioäº¤äº’ç•Œé¢
  - å®æ—¶è¿›åº¦æ˜¾ç¤º
  - éŸ³é¢‘é¢„è§ˆåŠŸèƒ½

### æ•°æ®æµ

```
ç”µå­ä¹¦æ–‡ä»¶ -> è§£æå¼•æ“ -> ç« èŠ‚æ–‡æœ¬ -> TTSå¼•æ“ -> éŸ³é¢‘ç‰‡æ®µ -> éŸ³é¢‘åˆå¹¶ -> æœ‰å£°ä¹¦
```

## ğŸ“ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„
```
VoiceLibra/
â”œâ”€â”€ main.py          # ç¨‹åºå…¥å£
â”œâ”€â”€ parser.py        # è§£ææ¨¡å—
â”œâ”€â”€ tts_fish.py      # TTSæ¥å£
â”œâ”€â”€ ui.py           # ç•Œé¢é€»è¾‘
â”œâ”€â”€ config.json     # é…ç½®æ–‡ä»¶
â””â”€â”€ requirements.txt # ä¾èµ–æ¸…å•
```

### æ‰©å±•å¼€å‘

- **æ·»åŠ æ–°æ ¼å¼**ï¼šæ‰©å±•parser.pyä¸­çš„æ ¼å¼æ”¯æŒ
- **è‡ªå®šä¹‰TTS**ï¼šä¿®æ”¹tts_fish.pyå®ç°å…¶ä»–TTSæ¥å£
- **ç•Œé¢å®šåˆ¶**ï¼šé€šè¿‡ui.pyè°ƒæ•´Gradioç•Œé¢

## âš ï¸ æ³¨æ„äº‹é¡¹

- å»ºè®®ä½¿ç”¨GPUè¿›è¡Œè¯­éŸ³åˆæˆï¼ŒCPUä¸‹é€Ÿåº¦è¾ƒæ…¢
- ç”µå­ä¹¦åº”ä¸TTSæ¨¡å‹è¯­è¨€åŒ¹é…ä»¥è·å¾—æœ€ä½³æ•ˆæœ
- é¦–æ¬¡è¿è¡Œæ—¶æ¨¡å‹åŠ è½½éœ€ç­‰å¾…æ•°åˆ†é’Ÿ
- è¯·éµå®ˆç‰ˆæƒæ³•è§„ï¼Œä»…ç”¨äºä¸ªäººå­¦ä¹ ç”¨é€”

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ‘¥ å‚ä¸è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š
- [Fish-Speech](https://github.com/fishaudio/fish-speech)
- [Gradio](https://gradio.app/)
- [Calibre](https://calibre-ebook.com/)
- [FFmpeg](https://ffmpeg.org/)